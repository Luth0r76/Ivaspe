<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Online Interactivo | Jose Academy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #ff6b6b 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 110px; 
            animation: gradientShift 15s ease infinite;
            transition: padding-top 0.3s ease; 
        }

        @keyframes gradientShift {
            0%, 100% {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #ff6b6b 100%);
            }
            50% {
                background: linear-gradient(135deg, #ff6b6b 0%, #667eea 50%, #764ba2 100%);
            }
        }

        .navbar {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            color: white;
            padding: 10px 20px; 
            text-align: center;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }

        .academy-name {
            font-size: 1.6em; 
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px; 
            margin-bottom: 8px; 
            transition: font-size 0.3s ease; 
        }

        .robot-icon {
            font-size: 0.9em; 
            animation: bounce 2s ease-in-out infinite;
            transition: font-size 0.3s ease;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-6px); } 
            60% { transform: translateY(-3px); }
        }
        
        .global-progress-wrapper-navbar {
            width: 100%;
            max-width: 900px; 
            padding: 0 10px; 
            box-sizing: border-box;
            margin-top: 5px; 
        }

        .progress-info-text-navbar {
            text-align: right;
            font-size: 0.8em; 
            color: #e2e8f0; 
            margin-bottom: 3px; 
        }

        .progress-container-navbar { 
            width: 100%;
            background-color: rgba(255, 255, 255, 0.2); 
            border-radius: 6px; 
            height: 8px;  
            overflow: hidden;
            box-shadow: inset 0 1px 2px rgba(0,0,0,0.1);
        }

        .progress-bar-navbar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #68d391, #48bb78); 
            border-radius: 6px; 
            transition: width 0.5s ease-in-out;
        }

        .container {
            max-width: 900px;
            width: 95%;
            margin: 20px auto 20px auto; 
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.25);
            overflow: hidden;
            padding: 20px;
        }

        .content-section {
            display: none;
            padding: 20px;
            border-radius: 15px;
            background-color: rgba(255, 255, 255, 0.9);
            margin-bottom: 20px;
        }

        .content-section.active {
            display: block;
        }

        .screen-title { 
            font-size: 1.8em;
            color: #333;
            margin-bottom: 20px;
            text-align: center;
        }
         .screen-description p { 
            font-size: 1.1em;
            color: #555;
            margin-bottom: 25px;
            line-height: 1.6;
            text-align: center;
        }
        .screen-description ul {
            list-style-position: inside;
            text-align: left;
            max-width: 500px;
            margin: 0 auto 25px auto;
        }
         .screen-description li {
            margin-bottom: 8px;
        }


        .btn {
            background: linear-gradient(135deg, #805ad5, #6b46c1);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 8px 15px rgba(107, 70, 193, 0.3);
        }
        .btn-secondary {
            background: linear-gradient(135deg, #a0aec0, #718096);
        }
         .btn-secondary:hover {
            box-shadow: 0 8px 15px rgba(113, 128, 150, 0.3);
        }
        .btn-training { 
             background: linear-gradient(135deg, #48bb78, #38a169);
        }
         .btn-training:hover {
            box-shadow: 0 8px 15px rgba(72, 187, 120, 0.3);
        }
        .btn-study { 
            background: linear-gradient(135deg, #f6ad55, #ed8936); 
        }
        .btn-study:hover {
            box-shadow: 0 8px 15px rgba(237, 137, 54, 0.3);
        }
        .btn-exam { 
             background: linear-gradient(135deg, #4299e1, #3182ce); 
        }
        .btn-exam:hover {
            box-shadow: 0 8px 15px rgba(66, 153, 225, 0.3);
        }


        #countdown {
            font-size: 5em;
            font-weight: bold;
            color: #6b46c1;
            margin: 30px 0;
            text-align: center;
        }

        .question-container {
            padding: 25px;
            background: #f8fafc;
            border-radius: 12px;
            border-left: 5px solid #6b46c1;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
        }

        .question-header {
            display: flex;
            flex-wrap: wrap; 
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            gap: 10px; 
        }
        .question-category {
            font-size: 0.9em;
            color: #555;
            background-color: #e2e8f0;
            padding: 5px 10px;
            border-radius: 20px;
        }
        .question-number {
            font-size: 1em;
            font-weight: bold;
            color: #6b46c1;
        }
        .test-mode-info {
            font-size: 0.85em;
            color: #4a5568; 
            background-color: #edf2f7; 
            padding: 6px 12px;
            border-radius: 15px;
            text-align: center;
            width: 100%; 
            order: 3; 
            margin-top: 5px;
        }


        .question-text {
            font-weight: bold;
            margin-bottom: 18px;
            color: #2d3748;
            font-size: 1.15em;
            line-height: 1.5;
        }

        .options {
            display: grid;
            gap: 12px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            font-size: 1em;
        }
        .option.disabled { 
            cursor: not-allowed;
            opacity: 0.7;
            pointer-events: none; 
        }


        .option:hover:not(.disabled) {
            border-color: #805ad5;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(128, 90, 213, 0.2);
        }

        .option.selected:not(.disabled) {
            background: #b794f4;
            color: white;
            border-color: #805ad5;
        }

        .option.correct {
            background: #48bb78 !important;
            color: white !important;
            border-color: #38a169 !important;
        }

        .option.incorrect { 
            background: #f56565 !important;
            color: white !important;
            border-color: #e53e3e !important;
        }
        
        .navigation-buttons, .correction-buttons { 
            text-align: center;
            margin-top: 20px;
        }
        #instantCorrectionFeedback {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            font-weight: bold;
            text-align: center;
        }
        #instantCorrectionFeedback.correct {
            background-color: #c6f6d5; color: #22543d;
        }
        #instantCorrectionFeedback.incorrect {
            background-color: #fed7d7; color: #742a2a;
        }


        #score-percentage {
            font-size: 3.5em;
            font-weight: bold;
            margin: 20px 0;
        }
        #score-details {
            font-size: 1.2em;
            color: #4a5568;
            margin-bottom: 25px;
        }
        .results-summary {
            margin-top: 30px;
            text-align: left;
        }
        .result-item {
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left-width: 4px;
            border-left-style: solid;
        }
        .result-item.correct {
            background-color: #c6f6d5;
            border-left-color: #38a169;
        }
        .result-item.incorrect {
            background-color: #fed7d7;
            border-left-color: #e53e3e;
        }
        .result-item p { margin-bottom: 5px; }
        .result-item strong { color: #2d3748; }

        .topic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        .topic-button { 
            padding: 20px;
            font-size: 1.1em;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .topic-button:hover {
            transform: translateY(-5px);
        }

        .footer {
            background: #2d3748;
            color: white;
            padding: 20px;
            text-align: center;
            width: 100%;
            margin-top: auto; 
            box-shadow: 0 -4px 15px rgba(0, 0, 0, 0.2);
            transition: padding 0.3s ease, font-size 0.3s ease; 
        }
        .footer p {
            transition: font-size 0.3s ease; 
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.6);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #fff;
            margin: auto;
            padding: 30px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .modal-content h2 {
            margin-top: 0;
            color: #333;
        }
        .modal-content p {
            color: #555;
            font-size: 1.1em;
            margin-bottom: 20px;
        }
        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            position: absolute;
            top: 10px;
            right: 20px;
        }
        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
        .button-group { 
            display: flex;
            flex-direction: column; 
            gap: 15px; 
            align-items: center; 
            margin-top: 20px;
        }
        .button-group .btn {
            width: 80%; 
            max-width: 350px; 
        }

        /* Ajustes para móvil cuando el test está activo */
        @media (max-width: 768px) {
            body.test-mode-active {
                padding-top: 95px; 
            }
            body.test-mode-active .navbar .academy-name {
                font-size: 1.2em; 
            }
            body.test-mode-active .navbar .robot-icon {
                font-size: 0.8em; 
            }
            body.test-mode-active .footer {
                padding: 10px; 
            }
            body.test-mode-active .footer p {
                font-size: 0.8em; 
            }
        }

    </style>
</head>

<body>
    <nav class="navbar">
        <div class="academy-name">
            🚀 Jose Academy <span class="robot-icon">🤖</span>
        </div>
        <div id="globalProgressWrapperNavbar" class="global-progress-wrapper-navbar" style="display: none;">
            <div id="progressInfoTextNavbar" class="progress-info-text-navbar">Progreso: 0%</div>
            <div class="progress-container-navbar">
                <div class="progress-bar-navbar" id="progressBarNavbar"></div>
            </div>
        </div>
    </nav>

    <div class="container">
        <div id="studyMethodSelectionScreen" class="content-section active">
            <h2 class="screen-title">🎯 Elige tu Método de Aprendizaje</h2>
            <div class="screen-description">
                <p>Selecciona cómo quieres prepararte:</p>
            </div>
            <div class="button-group">
                <button class="btn btn-study" onclick="selectStudyMethod('study')">📚 Modo Estudio</button>
                <button class="btn btn-exam" onclick="selectStudyMethod('exam')">📝 Modo Examen</button>
            </div>
        </div>

        <div id="studyTestSelectionScreen" class="content-section">
            <h2 class="screen-title">📚 Modo Estudio</h2>
            <div class="screen-description">
                <p>En este modo, podrás corregir cada pregunta al instante.</p>
                <p>Elige el tipo de test:</p>
            </div>
            <div class="button-group">
                <button class="btn btn-study" onclick="startTest('all_questions', '', 'study')">🚀 Test Completo (Estudio)</button>
                <button class="btn btn-study" onclick="showTopicSelectionScreen('study')">🎯 Entrenamiento por Tema (Estudio)</button>
            </div>
            <div class="text-center mt-6">
                 <button class="btn btn-secondary" onclick="showScreen('studyMethodSelectionScreen')">Volver</button>
            </div>
        </div>

        <div id="examTestSelectionScreen" class="content-section">
            <h2 class="screen-title">📝 Modo Examen</h2>
             <div class="screen-description">
                <p>En este modo, la corrección se mostrará al finalizar todas las preguntas.</p>
                <p>Elige el tipo de test:</p>
            </div>
            <div class="button-group">
                <button class="btn btn-exam" onclick="startTest('all_questions', '', 'exam')">🚀 Test Completo (Examen)</button>
                <button class="btn btn-exam" onclick="showTopicSelectionScreen('exam')">🎯 Entrenamiento por Tema (Examen)</button>
            </div>
             <div class="text-center mt-6">
                <button class="btn btn-secondary" onclick="showScreen('studyMethodSelectionScreen')">Volver</button>
            </div>
        </div>

        <div id="topicSelectionScreen" class="content-section">
            <h2 class="screen-title">📚 Elige un Tema para Entrenar</h2>
            <div id="topicGrid" class="topic-grid">
                </div>
            <div class="text-center mt-6">
                <button id="backFromTopicSelectionButton" class="btn btn-secondary">Volver</button>
            </div>
        </div>

        <div id="countdownScreen" class="content-section">
            <h2 class="screen-title">⏳ Preparando el Test...</h2>
            <div id="countdown">3</div>
        </div>

        <div id="testScreen" class="content-section">
            <div id="questionContainer" class="question-container">
                </div>
            <div id="instantCorrectionFeedback" class="mt-3 p-3 rounded-md" style="display:none;">
                </div>
            <div class="correction-buttons" id="correctionButtonContainer">
                 </div>
            <div class="navigation-buttons">
                <button id="prevButton" class="btn btn-secondary" onclick="prevQuestion()">⬅️ Anterior</button>
                <button id="nextButton" class="btn" onclick="nextQuestion()">Siguiente ➡️</button>
                <button id="finishButton" class="btn btn-training" onclick="finishTest()" style="display:none;">🏁 Finalizar Test</button>
            </div>
        </div>

        <div id="resultsScreen" class="content-section">
            <h2 class="screen-title">🏆 Resultados del Test</h2>
            <div id="scorePercentage" class="text-center">0%</div>
            <div id="scoreDetails" class="text-center">
                Has respondido <strong id="correctAnswers">0</strong> de <strong id="totalAnswered">0</strong> preguntas correctamente.
            </div>
            <div id="resultsSummary" class="results-summary">
                </div>
            <div class="text-center mt-6">
                <button class="btn btn-training" onclick="restartApp()">🔄 Reiniciar Test Completo</button>
                <button class="btn btn-secondary" onclick="showScreen('studyMethodSelectionScreen')">Elegir Otro Método/Test</button>
            </div>
        </div>
    </div>

    <div id="messageModal" class="modal">
        <div class="modal-content">
            <span class="close-button" onclick="closeModal()">&times;</span>
            <h2 id="modalTitle">Mensaje</h2>
            <p id="modalMessage">Este es un mensaje de prueba.</p>
            <button class="btn" onclick="closeModal()">Aceptar</button>
        </div>
    </div>

    <footer class="footer">
        <p>🤖 <strong>Jose Academy</strong> - Aprende de forma interactiva</p>
        <p>© <span id="currentYear"></span> Jose Academy. Educación tecnológica del futuro.</p>
    </footer>

    <script>
        // --- VARIABLES GLOBALES ---
        let currentQuestionIndex = 0;
        let userAnswers = []; 
        let currentStudyMethodType = 'exam'; 
        let currentTestScope = 'all_questions'; 
        let selectedTopic = '';   
        let score = 0;
        let countdownTimer;
        let loadedQuestions = []; 

        const allQuestions = [
            // Derecho Penal 
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "El artículo 250 de la Lecrim, establece los derechos del detenido, entre ellos:",
                options: [
                    { text: "Derecho a declarar la denuncia", value: "a" },
                    { text: "Derecho a no declarar", value: "b" },
                    { text: "Derecho a declarar con un familiar durante la detención", value: "c" },
                    { text: "Derecho a leer los derechos del detenido", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "En el caso del conductor de un vehículo, que ha cometido una infracción se negara a identificarse:",
                options: [
                    { text: "Deberemos dejarle marchar está en su derecho.", value: "a" },
                    { text: "Es un delito de negativa y procedemos a su detención.", value: "b" },
                    { text: "Inmovilizaremos el vehículo y las llaves del mismo.", value: "c" },
                    { text: "Le informamos de que tiene la obligación de identificarse y en caso de reiterada negativa, podrá ser requerido para que nos acompañe a la comisaría más cercana a efectos de identificación.", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Cuando se lesiona un Bien jurídico protegido BJP, siempre existirá una respuesta penal dentro de unos límites:",
                options: [
                    { text: "Principio de presunción de inocencia", value: "a" },
                    { text: "Principio de culpabilidad", value: "b" },
                    { text: "Principio de legalidad", value: "c" },
                    { text: "Todas las respuestas son constitucionales", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Cuando hablamos de tipo de delito, distinguimos entre:",
                options: [
                    { text: "Delito de acción y omisión", value: "a" },
                    { text: "Delito de lesión y peligro", value: "b" },
                    { text: "Delitos dolosos y imprudentes", value: "c" },
                    { text: "Todas las respuestas son correctas", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Consecuencia de un siniestro vial, por imprudencia grave de su conductor, se produce un resultado de muerte, estamos ante un delito:",
                options: [
                    { text: "Delito privado, únicamente perseguible mediante querella", value: "a" },
                    { text: "Hecho atípico, no hay reproche penal", value: "b" },
                    { text: "Público por homicidio art. 142.1 del CP", value: "c" },
                    { text: "Privado 142.1 del CP", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "El delito de conducir un vehículo a motor o ciclomotor sin haber obtenido nunca el permiso o licencia de conducción:",
                options: [
                    { text: "No existe en el CP", value: "a" },
                    { text: "No establece pena de prisión alguna", value: "b" },
                    { text: "Está derogado y pasa a ser infracción administrativa", value: "c" },
                    { text: "Es un delito público establecido en el artículo 384 del CP", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "La persona que conduzca un vehículo a motor o ciclomotor con una tasa de alcohol en aire espirado superior a 0.60 mg/l, estaría cometiendo:",
                options: [
                    { text: "Delito del art.379.2 del CP.", value: "a" },
                    { text: "Se puede circular por la vía con una tasa de alcohol indicada.", value: "b" },
                    { text: "No existe infracción alguna", value: "c" },
                    { text: "Infracción administrativa sin retirada de puntos.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Si observamos una descarga ilegal de aguas residuales de un barco al mar, cerca del puerto, se estaría cometiendo:",
                options: [
                    { text: "Pediremos que lo recoja o lo disperse por el mar", value: "a" },
                    { text: "Un delito contra el medio ambiente", value: "b" },
                    { text: "No podemos realizar ninguna acción ya que es legal", value: "c" },
                    { text: "Todas las respuestas son correctas", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Realizando patrulla nocturna, observamos contenedores en medio de la vía puestos tras una curva. Los causantes de colocar esos contenedores, ¿de qué delito podrían ser responsables?",
                options: [
                    { text: "Art. 385 del CP (Delito contra la seguridad vial por obstáculo)", value: "a" },
                    { text: "Denunciaremos a la pareja por bajar del vehículo", value: "b" },
                    { text: "No existe delito penal", value: "c" },
                    { text: "Los contenedores no se consideran obstáculos de tipo penal", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Regulando el tráfico, un ciclomotor no obedece señales. Al detenerlo, se encuentran 150 gramos de marihuana en su mochila. Estamos ante:",
                options: [
                    { text: "Infracción administrativa LO 4/2015", value: "a" },
                    { text: "Le dejaremos marchar ya que es consumo propio", value: "b" },
                    { text: "Un delito contra la salud pública", value: "c" },
                    { text: "Es una situación atípica y no tiene reproche penal", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "El artículo 10 del Código penal establece:",
                options: [
                    { text: "Las penas privativas de libertad", value: "a" },
                    { text: "Son delito las acciones y omisiones dolosas o imprudentes penadas por la ley.", value: "b" },
                    { text: "Los delitos de homicidio", value: "c" },
                    { text: "La definición de delito grave", value: "d"}
                ],
                correctAnswer: "b"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Aquellas lesiones que no requieren tratamiento médico quirúrgico alguno son consideradas como:",
                options: [
                    { text: "Leve", value: "a" },
                    { text: "Menos Grave", value: "b" },
                    { text: "Grave", value: "c" },
                    { text: "Muy Grave", value: "d"}
                ],
                correctAnswer: "a"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Cuando estamos ante el hecho de abandonar el lugar del accidente, un conductor de forma voluntaria el cual ha causado a otra persona lesiones graves, se trata de:",
                options: [
                    { text: "Delito de omisión del deber de socorro", value: "a" },
                    { text: "Delito de abandono del lugar del accidente", value: "b" },
                    { text: "Delito de lesiones leves", value: "c" },
                    { text: "Delito de estafa", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "En los delitos de agresión sexual en su tipo básico, ¿el consentimiento está presente?",
                options: [
                    { text: "No hay consentimiento", value: "a" },
                    { text: "Siempre hay una acción conjunta de personas", value: "b" },
                    { text: "Hay una situación de superioridad", value: "c" },
                    { text: "Sí, pero viciado", value: "d"}
                ],
                correctAnswer: "a"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Distinguimos entre el delito de hurto menos grave y leve:",
                options: [
                    { text: "Por el empleo de la fuerza", value: "a" },
                    { text: "Por el consentimiento del dueño de la causa mueble", value: "b" },
                    { text: "En función del valor de lo sustraído (si supera los 400 euros es menos grave)", value: "c" },
                    { text: "El delito de hurto siempre es grave y conlleva prisión", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Jóvenes consumiendo en el muelle Sur, se observa marihuana en pequeña cantidad. Esto es:",
                options: [
                    { text: "Delito contra la salud pública", value: "a" },
                    { text: "Delito contra el medio ambiente", value: "b" },
                    { text: "Infracción administrativa (LO 4/2015)", value: "c" },
                    { text: "Es una conducta legal dentro del área portuaria.", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Conductor estacionado en plaza de movilidad reducida con tarjeta aparentemente falsa. Estamos ante:",
                options: [
                    { text: "No existe delito en esta acción", value: "a" },
                    { text: "Un delito de falsedad documental", value: "b" },
                    { text: "Se trata de una sanción administrativa", value: "c" },
                    { text: "Un delito de usurpación de funciones", value: "d"}
                ],
                correctAnswer: "b"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "Cuando una persona agrede o acomete de forma grave o violenta a algún agente de la autoridad, estamos ante un delito de:",
                options: [
                    { text: "Desobediencia", value: "a" },
                    { text: "Amenaza", value: "b" },
                    { text: "Coacción", value: "c" },
                    { text: "Atentado", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "La negativa a someterse a las pruebas de alcohol o drogas legalmente establecidas, supone un delito de:",
                options: [
                    { text: "Tasa de alcohol delictiva art. 379.2 CP", value: "a" },
                    { text: "Negativa art. 383 CP", value: "b" },
                    { text: "Conducción temeraria art. 380 CP", value: "c" },
                    { text: "Conducir careciendo de permiso", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Derecho Penal", emoji: "⚖️",
                questionText: "El Código penal clasifica los delitos como:",
                options: [
                    { text: "Leve", value: "a" },
                    { text: "Menos grave", value: "b" },
                    { text: "Grave", value: "c" },
                    { text: "Todas son correctas", value: "d" }
                ],
                correctAnswer: "d"
            },

            // Drogas (de Drogas Test.pdf)
            {
                category: "Drogas", emoji: "💊",
                questionText: "La OMS define droga como:",
                options: [
                    { text: "Sustancia terapéutica", value: "a" },
                    { text: "Sustancia no terapéutica", value: "b" },
                    { text: "Sustancia terapéutica o no", value: "c" },
                    { text: "Ninguna de las anteriores", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "El estado de adaptación caracterizado por la disminución de la respuesta a la misma cantidad de droga, o por necesidad de una dosis mayor para provocar y sentir el mismo efecto se denomina:",
                options: [
                    { text: "Tolerancia", value: "a" },
                    { text: "Adicción", value: "b" },
                    { text: "Abuso de drogas", value: "c" },
                    { text: "Dependencia", value: "d"}
                ],
                correctAnswer: "a"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Qué tipo de consumidor es aquel que consume sustancias cada fin de semana:",
                options: [
                    { text: "Consumo experimental o casual", value: "a" },
                    { text: "Consumo ocasional esporádico o social", value: "b" },
                    { text: "Consumo sistemático o habitual", value: "c" },
                    { text: "Consumo abusivo", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Qué tipo de droga afecta al sistema nervioso central (SNC), acelerando el funcionamiento del cerebro:",
                options: [
                    { text: "Depresores", value: "a" },
                    { text: "Estimulantes", value: "b" },
                    { text: "Alucinógenos", value: "c" },
                    { text: "Cannabinoides", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Cuál de los siguientes son síntomas de consumo de alcohol:",
                options: [
                    { text: "Desinhibición", value: "a" },
                    { text: "Descoordinación motora", value: "b" },
                    { text: "Euforia", value: "c" },
                    { text: "Todas son correctas", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Según el artículo 379.2 del CP, ¿cuál es la tasa penal que se considera delito?",
                options: [
                    { text: "Aire espirado > 0,60 g/l o sangre > 1,2 g/l", value: "a" },
                    { text: "Aire espirado > 0,40 mg/l o sangre > 1,2 g/l", value: "b" },
                    { text: "Aire espirado > 0,60 g/l o sangre > 1,2 mg/l", value: "c" },
                    { text: "Aire espirado > 0,60 mg/l o sangre > 1,2 g/l", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Tasa máxima de alcohol para menores (ciclomotores, bicis, patinetes):",
                options: [
                    { text: "0,15 mg/l en aire y 0,3 g/l en sangre", value: "a" },
                    { text: "0,25 mg/l en aire y 0,5 g/l en sangre", value: "b" },
                    { text: "0,0 mg/l en aire y 0,0 g/l en sangre", value: "c" },
                    { text: "0.05 mg/l en aire y 0,1 g/l en sangre", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "¿Qué delito comete un conductor que se niega a las pruebas de alcohol/drogas?",
                options: [
                    { text: "Delito de conducción temeraria", value: "a" },
                    { text: "Delito de desobediencia grave a la autoridad", value: "b" },
                    { text: "Delito de negativa a someterse a las pruebas", value: "c" },
                    { text: "Infracción administrativa grave", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Según el art. 14 RDL 6/2015, ¿qué obligación tiene un conductor ante pruebas de alcohol/drogas?",
                options: [
                    { text: "Puede negarse sin consecuencias legales.", value: "a" },
                    { text: "Está obligado, y la negativa puede ser delito.", value: "b" },
                    { text: "Solo obligado si cometió infracción grave.", value: "c" },
                    { text: "Puede elegir entre prueba o multa.", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "En las pruebas de detección de drogas (proyecto DRUID), indica cuál NO sería un signo general:",
                options: [
                    { text: "Actitud y comportamiento", value: "a" },
                    { text: "Aspecto corporal general", value: "b" },
                    { text: "Conjuntiva enrojecida o con edema", value: "c" },
                    { text: "Aspecto de la cara", value: "d" },
                ],
                correctAnswer: "c"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Como se denomina al aumento del diámetro o dilatación de la pupila del ojo, debiéndose a consumo de sustancias estupefacientes:",
                options: [
                    { text: "Miosis", value: "a" },
                    { text: "Midriasis", value: "b" },
                    { text: "Nistagmo", value: "c" },
                    { text: "Anisocoria", value: "d"}
                ],
                correctAnswer: "b"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Como se denomina la contracción de la pupila, debiéndose a consumo de sustancias estupefacientes:",
                options: [
                    { text: "Miosis", value: "a" },
                    { text: "Midriasis", value: "b" },
                    { text: "Nistagmo", value: "c" },
                    { text: "Blefaroespasmo", value: "d"}
                ],
                correctAnswer: "a"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Se conoce por los movimientos involuntarios que puede realizar el ojo, debiéndose a consumo de sustancias estupefacientes:",
                options: [
                    { text: "Miosis", value: "a" },
                    { text: "Midriasis", value: "b" },
                    { text: "Nistagmo", value: "c" },
                    { text: "Diplopía", value: "d"}
                ],
                correctAnswer: "c"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "¿Qué es el proyecto DRUID (Driving Under Influence of alcohol and drugs)?",
                options: [
                    { text: "Un programa de rehabilitación para conductores.", value: "a" },
                    { text: "Una iniciativa europea para prevención de accidentes con tecnologías avanzadas.", value: "b" },
                    { text: "Un proyecto europeo que estudia el impacto de alcohol, drogas y medicamentos en la conducción.", value: "c" },
                    { text: "Un sistema de clasificación de medicamentos.", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "En el procedimiento explorador de signos de influencia, cuando el 'paciente realiza una alegación', esto es un:",
                options: [
                    { text: "Signo", value: "a" },
                    { text: "Síntoma", value: "b" },
                    { text: "Diagnóstico", value: "c" },
                    { text: "Presunción", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "En el procedimiento explorador de signos de influencia, 'lo que el profesional percibe' es un:",
                options: [
                    { text: "Signo", value: "a" },
                    { text: "Síntoma", value: "b" },
                    { text: "Historial", value: "c" },
                    { text: "Testimonio", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "¿Los terrenos públicos dentro del Puerto tienen la consideración de vía?",
                options: [
                    { text: "Si", value: "a" },
                    { text: "No", value: "b" },
                    { text: "Solo si están asfaltados", value: "c" },
                    { text: "Depende de la autoridad portuaria", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Drogas", emoji: "💊",
                questionText: "Según el art. 3 Ley sobre Tráfico, ¿qué se entiende por 'vía'?",
                options: [
                    { text: "Espacio exclusivo para tránsito de vehículos a motor.", value: "a" },
                    { text: "Espacio de dominio común por donde transitan peatones o circulan vehículos.", value: "b" },
                    { text: "Solo autopistas y autovías.", value: "c" },
                    { text: "Solo calles y avenidas en poblado.", value: "d" }
                ],
                correctAnswer: "b"
            },

            // Transporte de Mercancías (NUEVAS PREGUNTAS de MMPP TEST OK.pdf)
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "Que leyes regulan el transporte de mercancías por carretera:",
                options: [
                    { text: "LOTT/ROTT", value: "a" },
                    { text: "LOTT/ADR", value: "b" },
                    { text: "ADR", value: "c" },
                    { text: "Todas las anteriores", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "La LOTT, en el Capítulo I de su título III, efectúa las siguientes clasificaciones, según su naturaleza:",
                options: [
                    { text: "Públicos", value: "a" },
                    { text: "Privados", value: "b" },
                    { text: "Ambos", value: "c" },
                    { text: "Solo nacionales", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "Se consideran transportes públicos:",
                options: [
                    { text: "Aquellos que se llevan a cabo por cuenta ajena a cambio de una retribución económica.", value: "a" },
                    { text: "Aquellos que se llevan a cabo por cuenta propia, para satisfacer necesidades particulares o como complemento.", value: "b" },
                    { text: "Los realizados por entidades sin ánimo de lucro.", value: "c" },
                    { text: "Los que no superan las 3.5 toneladas de MMA.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "Se consideran transportes privados:",
                options: [
                    { text: "Aquellos que se llevan a cabo por cuenta ajena a cambio de una retribución económica.", value: "a" },
                    { text: "Aquellos que se llevan a cabo por cuenta propia, para satisfacer necesidades particulares o como complemento de otras actividades.", value: "b" },
                    { text: "Los que siempre requieren autorización especial.", value: "c" },
                    { text: "Solo los realizados con vehículos ligeros.", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "En el artículo 100, la LOTT distingue entre privados particulares y privados complementarios. ¿Cuál pertenece a los PRIVADOS PARTICULARES?",
                options: [
                    { text: "Estar dedicados a satisfacer las necesidades de desplazamiento de carácter personal o doméstico del titular del vehículo y de sus allegados y deben realizarse en vehículo turismo o ligeros.", value: "a" },
                    { text: "El que se lleva a cabo en el marco de la actuación general por empresas o establecimientos cuyas finalidades principales no son de transporte.", value: "b" },
                    { text: "Transporte de mercancías para la venta directa.", value: "c" },
                    { text: "Transporte realizado por cooperativas de transporte.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "En el artículo 100, la LOTT distingue entre privados particulares y privados complementarios. ¿Cuál pertenece a los PRIVADOS COMPLEMENTARIOS?",
                options: [
                    { text: "Estar dedicados a satisfacer las necesidades de desplazamiento de carácter personal o doméstico del titular del vehículo y de sus allegados y deben realizarse en vehículo turismo o ligeros.", value: "a" },
                    { text: "El que se lleva a cabo en el marco de la actuación general por empresas o establecimientos cuyas finalidades principales no son de transporte.", value: "b" },
                    { text: "Transporte de viajeros en autobús de línea regular.", value: "c" },
                    { text: "Transporte de amigos sin contraprestación económica.", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "Como se denomina al documento administrativo que acredita que un vehículo está autorizado para el transporte de cargas dentro de un territorio.",
                options: [
                    { text: "Permiso de transporte", value: "a" },
                    { text: "Tarjeta de transporte", value: "b" },
                    { text: "Tarjeta de embarque", value: "c" },
                    { text: "Certificado de aptitud del vehículo", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "Respecto a las excepciones a la obligatoriedad de la Tarjeta de transporte indica la respuesta INCORRECTA:",
                options: [
                    { text: "Transportes públicos o privados realizados en vehículos de menos de tres ruedas.", value: "a" },
                    { text: "Transportes privados complementarios de mercancías que se realicen en vehículos de hasta 3.5 toneladas de masa máxima autorizada.", value: "b" },
                    { text: "Transportes Oficiales.", value: "c" },
                    { text: "Vehículos automóviles que circulen con camino de rodadura fija, y con medios fijos de captación de energía.", value: "d" }
                ],
                correctAnswer: "d" 
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "¿Cuáles son las exigencias jurídicas que deben satisfacerse al utilizar el tratamiento electrónico de la información (TEI) o el intercambio de datos electrónicos (EDI) como sustituto de documentos en papel durante el transporte?",
                options: [
                    { text: "Fuerza probatoria y disponibilidad de los datos.", value: "a" },
                    { text: "Velocidad de transmisión y compatibilidad con dispositivos móviles.", value: "b" },
                    { text: "Reducción de costes administrativos y uso exclusivo de formatos estándar.", value: "c" },
                    { text: "Validación por parte del destinatario final y respaldo en la nube.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "¿Qué debe tenerse en cuenta respecto al modelo de la carta de porte en el transporte de mercancías?",
                options: [
                    { text: "Es obligatorio utilizar el modelo oficial establecido por el Ministerio de Transportes.", value: "a" },
                    { text: "La carta de porte debe ser manuscrita y seguir un diseño preaprobado.", value: "b" },
                    { text: "No existe un modelo oficial de carta de porte.", value: "c" },
                    { text: "Solo se puede usar un formato digital homologado por la Unión Europea.", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "¿Cuáles de las siguientes informaciones deben figurar en la carta de porte para toda materia u objeto presentado para su transporte?",
                options: [
                    { text: "El número ONU.", value: "a" },
                    { text: "La designación oficial de transporte.", value: "b" },
                    { text: "El número de licencia del conductor.", value: "c" }, 
                    { text: "Clase, grupo de embalaje, número y descripción de bultos, cantidad total, nombre y dirección del expedidor y del destinatario.", value: "d" }
                ],
                correctAnswer: "c" 
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "¿En qué caso no será necesario emitir un certificado de arrumazón separado para el contenedor?",
                options: [
                    { text: "Cuando el conductor confirma verbalmente la correcta sujeción de la carga.", value: "a" },
                    { text: "Cuando se inserta en la carta de porte una declaración que indique que la carga se efectuó conforme a los reglamentos aplicables y se identifique a la persona responsable del certificado de arrumazón.", value: "b" }, 
                    { text: "Cuando el destinatario final acepta la carga sin inspección previa.", value: "c" },
                    { text: "Cuando el certificado de arrumazón se emite por la empresa de transporte de forma independiente.", value: "d" }
                ],
                correctAnswer: "b" 
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "¿Cuál es la definición más adecuada de arrumazón en el contexto del transporte de mercancías?",
                options: [
                    { text: "La acción de cargar mercancías en el contenedor sin importar su estado.", value: "a" },
                    { text: "Emitida por el expedidor, esta certifica que los bultos fueron arrumados en un contenedor limpio y seco, compatibles entre sí, en buen estado aparente y adecuadamente arrumados y trincados.", value: "b" },
                    { text: "El proceso de documentar la carga para su transporte internacional.", value: "c" },
                    { text: "El embalaje exterior utilizado para proteger la mercancía durante el transporte.", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "Antes de comenzar un viaje con mercancías peligrosas, ¿qué deben hacer los miembros de la tripulación respecto a las instrucciones escritas?",
                options: [
                    { text: "Informarse sobre las mercancías peligrosas cargadas y consultar las instrucciones escritas sobre las acciones a tomar en caso de accidente o emergencia y que sean seguras y practicables.", value: "a" },
                    { text: "Ignorar las instrucciones escritas y seguir solo su experiencia.", value: "b" },
                    { text: "Entregar las instrucciones escritas al destinatario sin revisarlas.", value: "c" },
                    { text: "Esperar a que el destinatario les explique las instrucciones escritas.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "¿En qué consiste la característica actual de las Instrucciones escritas para el transporte de mercancías peligrosas?",
                options: [
                    { text: "Que existe un formato estándar que se utiliza independientemente del tipo de mercancías transportadas.", value: "a" },
                    { text: "Que cada transportista debe crear su propio formato personalizado para las instrucciones.", value: "b" },
                    { text: "Que solo se usan instrucciones escritas para mercancías líquidas.", value: "c" },
                    { text: "Que las instrucciones escritas son opcionales si la carga es pequeña.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Transporte de Mercancías", emoji: "🚚",
                questionText: "¿Qué obligación tiene el transportista respecto al idioma de las instrucciones escritas que debe llevar el conductor?",
                options: [
                    { text: "Asegurarse de que el conductor lleva las instrucciones escritas en un idioma que entiende.", value: "a" },
                    { text: "No es necesario que el conductor entienda las instrucciones si el transportista las tiene.", value: "b" },
                    { text: "Solo se exige que las instrucciones estén en el idioma del país de destino.", value: "c" },
                    { text: "Las instrucciones escritas pueden estar en cualquier idioma sin importar el conductor.", value: "d" }
                ],
                correctAnswer: "a"
            },
            
            // Tácticas Policiales (NUEVAS PREGUNTAS de Tactica Policial Ok.pdf)
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿La posición que deberá colocarse una persona para ponerle los grilletes será...?",
                options: [
                    { text: "De cúbito prono (manos a la espalda y dorso con dorso)", value: "a" },
                    { text: "De cúbito prono (manos a la espalda y palma con palma)", value: "b" },
                    { text: "De cúbito prono (manos delante y dorso con dorso)", value: "c" },
                    { text: "De cúbito prono (manos delante y palma con palma)", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿Qué es el efecto interlímbico?",
                options: [
                    { text: "La falta de coordinación muscular causada por una lesión en el sistema nervioso central.", value: "a" },
                    { text: "El aumento de fuerza en un músculo debido al entrenamiento unilateral del lado opuesto.", value: "b" },
                    { text: "Coordinación y sincronización entre diferentes miembros del cuerpo durante un movimiento. Es involuntario.", value: "c" },
                    { text: "Una técnica de entrenamiento utilizada para mejorar la flexibilidad en miembros superiores e inferiores.", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿A qué se deben los espasmos musculares o contracciones musculares involuntarias?",
                options: [
                    { text: "A una mala hidratación y fatiga muscular localizada.", value: "a" },
                    { text: "A un fallo en la unión neuromuscular que impide la relajación del músculo.", value: "b" },
                    { text: "A replicar los movimientos con ambas manos (Reflejo interlímbico).", value: "c" }, 
                    { text: "A un exceso de calcio en la sangre que estimula continuamente las fibras musculares.", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿Qué es la exclusión auditiva en una situación de estrés?",
                options: [
                    { text: "Una condición médica crónica que impide procesar sonidos agudos.", value: "a" },
                    { text: "La pérdida de audición causada por la exposición prolongada al ruido.", value: "b" },
                    { text: "Un mecanismo de defensa que bloquea sonidos irrelevantes durante la concentración intensa.", value: "c" },
                    { text: "Activa el sistema nervioso simpático. Es un efecto del estrés.", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "Si una persona tiene una requisitoria y orden de detención, ¿cuál será la forma más segura de actuar (orden del procedimiento)?",
                options: [
                    { text: "1º Informar de sus derechos / 2º Cacheo", value: "a" },
                    { text: "1º Lectura de la orden judicial / 2º Enmanillamiento", value: "b" },
                    { text: "1º Cacheo / 2º Engrilletamiento", value: "c" },
                    { text: "1º Engrilletamiento / 2º Cacheo", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿Qué entendemos por el llamado efecto túnel?",
                options: [
                    { text: "Aumento de la agudeza visual durante una actividad física intensa.", value: "a" },
                    { text: "Reducción del campo visual en situaciones de peligro vital, alta tensión o estrés.", value: "b" },
                    { text: "Visión doble causada por un desajuste neurológico momentáneo.", value: "c" },
                    { text: "Adaptación del ojo humano a la oscuridad en espacios cerrados.", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "Si nos encontramos en una intervención que conlleva el uso de la fuerza y entramos en lo que denominamos efecto túnel...",
                options: [
                    { text: "Debemos aumentar la agresividad para compensar la pérdida de percepción.", value: "a" },
                    { text: "Es crucial intentar ampliar el campo visual, controlar la respiración y mantener la conciencia situacional.", value: "b" },
                    { text: "Significa que la adrenalina está optimizando nuestra respuesta y no hay que preocuparse.", value: "c" },
                    { text: "Hay que cerrar los ojos momentáneamente para recalibrar la visión.", value: "d" }
                ],
                correctAnswer: "b" 
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿Cuál es uno de los efectos del estrés durante una actuación en binomio?",
                options: [
                    { text: "Mejora de la comunicación no verbal entre los integrantes.", value: "a" },
                    { text: "Aumento de la coordinación táctica entre compañeros.", value: "b" },
                    { text: "Disminución de la respuesta instintiva y motora.", value: "c" },
                    { text: "Es la individualización perceptual.", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿Qué entendemos por la regla de Tueller?",
                options: [
                    { text: "El tiempo mínimo de reacción ante un ataque sorpresa.", value: "a" },
                    { text: "La distancia necesaria para neutralizar a un agresor desarmado.", value: "b" },
                    { text: "La distancia mínima de seguridad para responder a un ataque con arma blanca es de unos 7 metros.", value: "c" },
                    { text: "El protocolo de intervención ante amenazas con armas de fuego.", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿En cuál de las siguientes situaciones es MENOS indicado el uso prioritario de la 'parada en llamada'?", 
                options: [
                    { text: "Vehículo con ocupantes con conducta extraña.", value: "a" },
                    { text: "Vehículo con cristales tintados que impiden visibilidad.", value: "b" },
                    { text: "Furgonetas o camiones que levantan sospechas.", value: "c" },
                    { text: "Actuación rutinaria trabajando en binomio con buena visibilidad.", value: "d" } 
                ],
                correctAnswer: "d" 
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "Respecto al control de sangrados y el porte de un torniquete por un agente:", 
                options: [
                    { text: "Depende del criterio y preferencia personal del agente.", value: "a" },
                    { text: "Solo es necesario en unidades especializadas como U.I.P o G.O.E.S.", value: "b" },
                    { text: "Es una recomendación médica, pero la formación es opcional.", value: "c" },
                    { text: "Se debe tener formación obligatoria.", value: "d" } 
                ],
                correctAnswer: "d"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "En una intervención, el agente que desempeña el rol de contacto se encargará de:",
                options: [
                    { text: "Controlar la escena y asegurar el perímetro.", value: "a" },
                    { text: "Dialogar, dar órdenes o negociar.", value: "b" },
                    { text: "Realizar el arresto y el uso de la fuerza física.", value: "c" },
                    { text: "Coordinar con otras unidades y servicios de emergencia.", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "En una intervención, el agente que desempeña el rol de protección se encargará de:",
                options: [
                    { text: "Negociar con el individuo para evitar el conflicto.", value: "a" },
                    { text: "Estar atento al individuo, controlando los movimientos para proteger al compañero, especialmente el movimiento de las manos.", value: "b" },
                    { text: "Documentar la intervención y recopilar pruebas.", value: "c" },
                    { text: "Coordinar el traslado del detenido al centro policial.", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "¿Cuál es el primer uso de la fuerza de las Fuerzas y Cuerpos de Seguridad (FFCCSS)?",
                options: [
                    { text: "Uso de armas no letales.", value: "a" },
                    { text: "Intervención física directa.", value: "b" },
                    { text: "Presencia policial y comunicación táctica.", value: "c" },
                    { text: "Uso de armas de fuego.", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "En la intervención de vehículos, ¿qué conocemos como riesgo desconocido?",
                options: [
                    { text: "Aquel que no se conoce o no se puede evaluar completamente antes del contacto.", value: "a" }, 
                    { text: "Riesgo controlado mediante protocolos estándar.", value: "b" },
                    { text: "Riesgo identificado previamente por la policía.", value: "c" },
                    { text: "Riesgo asociado a fallos mecánicos del vehículo.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Tácticas Policiales", emoji: "👮",
                questionText: "En la intervención con vehículos, ¿qué conocemos como riesgo bajo?",
                options: [
                    { text: "Riesgo que puede manejarse con medidas mínimas de precaución.", value: "a" },
                    { text: "No existe el riesgo bajo; toda intervención tiene un riesgo inherente.", value: "b" }, 
                    { text: "Riesgo que solo afecta al vehículo y no a las personas.", value: "c" },
                    { text: "Riesgo asociado a situaciones rutinarias sin amenaza aparente.", value: "d" }
                ],
                correctAnswer: "b"
            },
            
            // Seguridad Vial
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "¿Cuál de los siguientes fue uno de los primeros hitos de la historia del tráfico?",
                options: [
                    { text: "La invención de la rueda", value: "a" },
                    { text: "La construcción de las primeras carreteras", value: "b" },
                    { text: "La domesticación del caballo", value: "c" },
                    { text: "El primer semáforo", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "¿Cuál fue la calzada que a través de sus 1500 km de longitud unía Cádiz con los Pirineos y atravesaba la Comunidad Valenciana en más de 400 km?",
                options: [
                    { text: "Vía de la Plata", value: "a" },
                    { text: "Vía Augusta", value: "b" },
                    { text: "Camino de Santiago", value: "c" },
                    { text: "Vía Apia", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "¿Los problemas del tráfico son una novedad actual?",
                options: [
                    { text: "Sí, surgieron con el automóvil", value: "a" },
                    { text: "No, tienen su origen en la historia", value: "b" },
                    { text: "Sí, principalmente en las grandes ciudades", value: "c" },
                    { text: "No, pero se han agravado recientemente", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "¿Cuál de los siguientes automóviles fue el primero en crearse a nivel mundial?",
                options: [
                    { text: "El Ford Modelo T", value: "a" },
                    { text: "El vehículo a vapor de Cugnot", value: "b" },
                    { text: "El vehículo a motor de combustión (Benz Patent-Motorwagen)", value: "c" },
                    { text: "El primer coche eléctrico", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "El Código de Circulación aprobado en el año 1934 estuvo vigente durante muchas décadas. ¿Hasta cuándo se mantuvo en vigor siendo derogado en su totalidad?",
                options: [
                    { text: "Hasta la Ley de Seguridad Vial de 1990", value: "a" },
                    { text: "Hasta el Reglamento General de Circulación de 2003", value: "b" },
                    { text: "Hasta la entrada en vigor del Permiso por Puntos en 2006", value: "c" },
                    { text: "Con la entrada en vigor del Reglamento General de Conductores de 2009", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "¿Qué obligación tienen los usuarios de las vías cuando presencian o tienen conocimiento de un accidente de tráfico?",
                options: [
                    { text: "Detenerse siempre y esperar a los servicios de emergencia", value: "a" },
                    { text: "No intervenir para no entorpecer", value: "b" },
                    { text: "Auxiliar o solicitar auxilio para las víctimas, colaborar para evitar mayores daños y restablecer la seguridad vial", value: "c" },
                    { text: "Grabar el suceso para tener pruebas", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "¿Quién es responsable si un pasajero de motocicleta no lleva el casco homologado de protección?",
                options: [
                    { text: "El pasajero, si es mayor de edad", value: "a" },
                    { text: "El titular del seguro del vehículo", value: "b" },
                    { text: "Ambos, conductor y pasajero solidariamente", value: "c" },
                    { text: "El conductor del vehículo", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "¿Qué distancia lateral mínima debe mantener un conductor al adelantar a un ciclista fuera de poblado, si la vía tiene un único carril por sentido?",
                options: [
                    { text: "1 metro", value: "a" },
                    { text: "1,5 metros", value: "b" },
                    { text: "2 metros", value: "c" },
                    { text: "La que considere segura el conductor", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "¿Cuál es la infracción que comete una persona implicada en un accidente de tráfico que se niega a facilitar sus datos a los agentes o a la otra parte?",
                options: [
                    { text: "Delito de omisión del deber de socorro", value: "a" },
                    { text: "Infracción administrativa grave según el art. 129.2 RGC", value: "b" },
                    { text: "Infracción administrativa leve", value: "c" },
                    { text: "No es una infracción si no hay heridos", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "Conducir vehículos que tengan instalados inhibidores de radares o cinemómetros u otros mecanismos encaminados a interferir en los sistemas de vigilancia del tráfico...",
                options: [
                    { text: "Retira 6 puntos del permiso", value: "a" },
                    { text: "Retira 3 puntos del permiso", value: "b" },
                    { text: "Es una infracción grave sin retirada de puntos", value: "c" },
                    { text: "Solo es sancionable su uso, no su instalación", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "VMP es:",
                options: [
                    { text: "Vehículo de una o más ruedas dotado de una única plaza y propulsado exclusivamente por motores eléctricos que pueden proporcionar al vehículo una velocidad máxima por diseño comprendida entre 6 y 25 km/h", value: "a" },
                    { text: "Vehículo Motorizado Personal de hasta 50cc", value: "b" },
                    { text: "Vehículo de Movilidad Pequeña, como bicicletas con asistencia", value: "c" },
                    { text: "Vehículo Muy Peligroso, restringido en zonas urbanas", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "El conductor de un vehículo está obligado a someterse a las pruebas para la detección de alcohol o de la presencia de drogas en el organismo:",
                options: [
                    { text: "Todas son correctas", value: "a" },
                    { text: "Solo si presenta síntomas evidentes de estar bajo su influencia", value: "b" },
                    { text: "Únicamente si ha cometido una infracción", value: "c" },
                    { text: "Cuando es requerido por un agente en un control preventivo", value: "d" } 
                ],
                correctAnswer: "a" 
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "La competencia para regular el uso del casco en VMP es de:",
                options: [
                    { text: "El Estado, mediante el Reglamento General de Circulación", value: "a" },
                    { text: "Las Comunidades Autónomas", value: "b" },
                    { text: "Los Ayuntamientos, mediante ordenanza municipal", value: "c" },
                    { text: "La Dirección General de Tráfico exclusivamente", value: "d" }
                ],
                correctAnswer: "a" 
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "De los siguientes factores, ¿cuáles se conforman como los grandes retos de la movilidad actual?",
                options: [
                    { text: "Congestión y contaminación", value: "a" },
                    { text: "Accidentes y aumento de la siniestralidad", value: "b" },
                    { text: "Solo la contaminación atmosférica", value: "c" },
                    { text: "Todas las respuestas son correctas (Congestión, contaminación, accidentes y aumento de la siniestralidad)", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "De conformidad con la Ley 6/2011 de Movilidad de la Comunidad Valenciana, ¿cuáles son las características básicas de la movilidad?",
                options: [
                    { text: "Rapidez, economía y confort", value: "a" },
                    { text: "Universalidad, gratuidad y eficiencia", value: "b" },
                    { text: "Sostenibilidad, accesibilidad y seguridad", value: "c" },
                    { text: "Innovación, tecnología y conectividad", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Seguridad Vial", emoji: "🚦",
                questionText: "Según el Reglamento General de Circulación, la señal efectuada por los agentes de circulación consistente en extender un brazo, o ambos horizontalmente...",
                options: [
                    { text: "Obliga a detenerse a todos los usuarios de la vía", value: "a" },
                    { text: "Obliga a detenerse a los usuarios de la vía que se acerquen al agente desde cualquier dirección que corte la indicada por el brazo o brazos", value: "b" },
                    { text: "Advierte de la proximidad de un peligro", value: "c" },
                    { text: "Permite el paso a los vehículos que se aproximan de frente", value: "d" }
                ],
                correctAnswer: "b"
            },
            // Psicología Aplicada a la Resolución de Conflicto
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "¿Qué consideraríamos un conflicto?",
                options: [
                    { text: "Es una situación en la que dos o más partes tienen intereses, necesidades, valores, creencias o objetos incompatibles o percibidos como tales, lo que genera tensión, desacuerdo o enfrentamiento.", value: "a" },
                    { text: "Es un proceso de comunicación en el que ambas partes llegan a un acuerdo sin desacuerdos previos.", value: "b" },
                    { text: "Es un evento donde todas las partes implicadas comparten los mismos objetivos y valores.", value: "c" },
                    { text: "Es una forma de cooperación donde las diferencias se dejan de lado sin necesidad de resolverlas.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Indica dentro de los conflictos cual se consideraría una intensificación del enfrentamiento:",
                options: [
                    { text: "Escalada", value: "a" },
                    { text: "Estancamiento", value: "b" },
                    { text: "Desescalada", value: "c" },
                    { text: "Resolución", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Indica dentro de los conflictos cual se consideraría un bloqueo cuando las partes se aferran a sus posiciones:",
                options: [
                    { text: "Escalada", value: "a" },
                    { text: "Estancamiento", value: "b" },
                    { text: "Desescalada", value: "c" },
                    { text: "Negociación", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Indica dentro de los conflictos cual se consideraría una reducción de la tensión gracias a negociaciones:",
                options: [
                    { text: "Escalada", value: "a" },
                    { text: "Estancamiento", value: "b" },
                    { text: "Desescalada", value: "c" },
                    { text: "Confrontación", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Respecto a los orígenes del conflicto, cual consideraríamos aquel que te hace falta:",
                options: [
                    { text: "Conflicto de intereses", value: "a" },
                    { text: "Conflicto de valores", value: "b" },
                    { text: "Conflicto de necesidades", value: "c" },
                    { text: "Conflicto de recursos", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Respecto a los orígenes del conflicto, cual consideraríamos por aquello que deseamos o aspiramos:",
                options: [
                    { text: "Conflicto de intereses", value: "a" },
                    { text: "Conflicto de valores", value: "b" },
                    { text: "Conflicto de necesidades", value: "c" },
                    { text: "Conflicto de percepciones", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Respecto a los orígenes del conflicto, cual consideraríamos que es importante para uno mismo:",
                options: [
                    { text: "Conflicto de intereses", value: "a" },
                    { text: "Conflicto de valores", value: "b" },
                    { text: "Conflicto de necesidades", value: "c" },
                    { text: "Conflicto estructural", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Dentro de los conflictos encontramos partes involucradas, aquellos problemas que se genera uno mismo sería:",
                options: [
                    { text: "Conflicto intrapersonal", value: "a" },
                    { text: "Conflicto grupal", value: "b" },
                    { text: "Conflicto interpersonal", value: "c" },
                    { text: "Conflicto social", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Dentro de los conflictos encontramos partes involucradas, aquellos problemas que ocurren entre dos o más personas cuando existen desacuerdos:",
                options: [
                    { text: "Conflicto intrapersonal", value: "a" },
                    { text: "Conflicto grupal", value: "b" },
                    { text: "Conflicto interpersonal", value: "c" },
                    { text: "Conflicto organizacional", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Dentro de las formas básicas de resolución de conflictos, cual sería aquel en el que el mediador es imparcial:",
                options: [
                    { text: "Negociación", value: "a" },
                    { text: "Mediación", value: "b" },
                    { text: "Conciliación", value: "c" },
                    { text: "Arbitraje", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Dentro de las formas básicas de resolución de conflictos, cual sería aquel en el que es dos o más partes intentan buscar un acuerdo y solo participan las personas implicadas:",
                options: [
                    { text: "Negociación", value: "a" },
                    { text: "Mediación", value: "b" },
                    { text: "Conciliación", value: "c" },
                    { text: "Litigio", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Dentro de las formas básicas de resolución de conflictos, cual sería aquel en el que un tercero propone soluciones a un conflicto:",
                options: [
                    { text: "Negociación", value: "a" },
                    { text: "Mediación", value: "b" },
                    { text: "Conciliación", value: "c" },
                    { text: "Juicio", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "¿Qué función debe tener un policía?",
                options: [
                    { text: "Mantener el control de la situación", value: "a" },
                    { text: "Participar activamente en el conflicto", value: "b" },
                    { text: "Tomar partido por una de las partes", value: "c" },
                    { text: "Ignorar el problema hasta que se resuelva solo", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Indica cuál sería la definición de empatía:",
                options: [
                    { text: "Capacidad de resolver conflictos mediante la imposición de autoridad.", value: "a" },
                    { text: "Actitud de mantenerse neutral y no involucrarse en las emociones ajenas.", value: "b" },
                    { text: "Habilidad social de ponerse en el lugar del otro, comprendiendo sus emociones y perspectivas, aunque no se compartan.", value: "c" },
                    { text: "Aptitud para convencer a otros de cambiar sus opiniones sin importar sus sentimientos.", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Psicología de Conflictos", emoji: "🧠",
                questionText: "Consideraríamos escucha activa a:",
                options: [
                    { text: "Prestar atención únicamente a las palabras que dice el interlocutor.", value: "a" },
                    { text: "La habilidad social que consiste en prestar atención real al interlocutor, no solo a sus palabras, sino también a su tono, lenguaje corporal y emociones.", value: "b" },
                    { text: "Escuchar sin hacer preguntas ni mostrar interés.", value: "c" },
                    { text: "Interrumpir para dar tu opinión antes de que termine de hablar.", value: "d" }
                ],
                correctAnswer: "b" 
            },
            // Primeros Auxilios
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Que consideraríamos una Urgencia:",
                options: [
                    { text: "Cualquier situación a que a criterio del paciente requiere asistencia sanitaria.", value: "a" },
                    { text: "Comprende la vida del paciente.", value: "b" },
                    { text: "Una lesión menor que puede esperar.", value: "c" },
                    { text: "Una situación que no requiere atención médica inmediata.", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Que consideraríamos una Emergencia:",
                options: [
                    { text: "Cualquier situación a que a criterio del paciente requiere asistencia sanitaria.", value: "a" },
                    { text: "Comprende la vida del paciente.", value: "b" },
                    { text: "Una molestia leve sin riesgo vital.", value: "c" },
                    { text: "Una situación que puede ser atendida en consulta programada.", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "¿Qué definiría la abreviatura respecto a primeros auxilios, PAS?",
                options: [
                    { text: "Proteger, Atacar, Socorrer", value: "a" },
                    { text: "Prevenir, Ayudar, Socorrer", value: "b" },
                    { text: "Parar, Avisar, Salvar", value: "c" },
                    { text: "Proteger, Avisar, Socorrer", value: "d" } // Corregido según el estándar
                ],
                correctAnswer: "d"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Dentro del algoritmo de actuación que marca el procedimiento, ¿qué haríamos al comprobar una inconsciencia?",
                options: [
                    { text: "Dar un golpe en la espalda", value: "a" },
                    { text: "Pedir ayuda sin verificar la situación", value: "b" },
                    { text: "Levantarla rápidamente", value: "c" },
                    { text: "Toque de hombros y hablarle en voz alta", value: "d" } // Más completo
                ],
                correctAnswer: "d"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Al comprobar la respiración, que tiempo de comprobación tenemos:",
                options: [
                    { text: "No más de 10 segundos (ver, oír, sentir)", value: "a" }, // Más preciso
                    { text: "10 a 20 segundo", value: "b" },
                    { text: "15 a 20 segundos", value: "c" },
                    { text: "1 a 5 segundos", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Si la persona afectada no respira y es un adulto, una vez hemos llamado al número de emergencias 112, le realizaremos una RCP. Indica qué relación compresión/respiración sería la correcta:",
                options: [
                    { text: "15 compresiones / 5 ventilaciones", value: "a" },
                    { text: "30 compresiones / 2 ventilaciones", value: "b" },
                    { text: "20 compresiones / 1 ventilación", value: "c" },
                    { text: "10 compresiones / 3 ventilaciones", value: "d" }
                ],
                correctAnswer: "b"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Indica en un paciente adulto cuál sería la profundidad torácica, al realizar una compresión:",
                options: [
                    { text: "Entre 4 cm y 5 cm", value: "a" }, // Ajustado para más opciones
                    { text: "Exactamente 4 cm", value: "b" },
                    { text: "Entre 5 cm y 6 cm", value: "c" },
                    { text: "Menos de 3 cm", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Al realizar RCP a una persona adulta, indica la frecuencia torácica:",
                options: [
                    { text: "Entre 100-120/min", value: "a" },
                    { text: "Entre 60-80/min", value: "b" },
                    { text: "Entre 130-150/min", value: "c" },
                    { text: "Entre 70-90/min", value: "d" }
                ],
                correctAnswer: "a"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "¿Cada cuánto es recomendable cambiar la posición de las compresiones si estamos dos reanimadores, en una persona adulta?",
                options: [
                    { text: "Cada 5 minutos", value: "a" },
                    { text: "Cada 10 minutos", value: "b" },
                    { text: "Cada 1 minuto", value: "c" },
                    { text: "Cada 2 minutos", value: "d" }
                ],
                correctAnswer: "d"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "¿Cuándo finaliza una RCP?",
                options: [
                    { text: "Cuando la persona no responde en los primeros 30 segundos", value: "a" },
                    { text: "Cuando el reanimador se cansa y no hay relevo", value: "b" }, // Más preciso
                    { text: "Hasta que lleguen los servicios sanitarios o la víctima muestre signos de vida", value: "c" }, // Más completo
                    { text: "Después de 2 minutos sin respuesta", value: "d" }
                ],
                correctAnswer: "c"
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Cuando estamos realizando compresiones a un niño y solo hay un reanimador, ¿cuál debe ser la relación de compresión/ventilación?",
                options: [
                    { text: "15 compresiones / 2 ventilaciones", value: "a" },
                    { text: "30 compresiones / 2 ventilaciones", value: "b" },
                    { text: "20 compresiones / 2 ventilaciones", value: "c" },
                    { text: "10 compresiones / 1 ventilación", value: "d" }
                ],
                correctAnswer: "b" // Para un solo reanimador en niños, se suele recomendar 30:2 para simplificar y no retrasar compresiones.
            },
            {
                category: "Primeros Auxilios", emoji: "⚕️",
                questionText: "Cuando estamos realizando compresiones a un niño y hay dos reanimadores, ¿cuál debe ser la relación de compresión/ventilación?",
                options: [
                    { text: "15 compresiones / 2 ventilaciones", value: "a" },
                    { text: "30 compresiones / 2 ventilaciones", value: "b" },
                    { text: "20 compresiones / 2 ventilaciones", value: "c" },
                    { text: "10 compresiones / 1 ventilación", value: "d" }
                ],
                correctAnswer: "a"
            }
        ];

        // --- DOM ELEMENTOS ---
        const studyMethodSelectionScreen = document.getElementById('studyMethodSelectionScreen');
        const studyTestSelectionScreen = document.getElementById('studyTestSelectionScreen');
        const examTestSelectionScreen = document.getElementById('examTestSelectionScreen');
        const topicSelectionScreen = document.getElementById('topicSelectionScreen');
        const countdownScreen = document.getElementById('countdownScreen');
        const testScreen = document.getElementById('testScreen');
        const resultsScreen = document.getElementById('resultsScreen');
        const questionContainer = document.getElementById('questionContainer');
        
        const globalProgressWrapperNavbar = document.getElementById('globalProgressWrapperNavbar');
        const progressBarNavbar = document.getElementById('progressBarNavbar');
        const progressInfoTextNavbar = document.getElementById('progressInfoTextNavbar');


        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const finishButton = document.getElementById('finishButton');
        const topicGrid = document.getElementById('topicGrid');
        const correctionButtonContainer = document.getElementById('correctionButtonContainer');
        const instantCorrectionFeedback = document.getElementById('instantCorrectionFeedback');
        const backFromTopicSelectionButton = document.getElementById('backFromTopicSelectionButton');


        // Modal elements
        const messageModal = document.getElementById('messageModal');
        const modalTitle = document.getElementById('modalTitle');
        const modalMessage = document.getElementById('modalMessage');

        // --- LÓGICA DE LA APLICACIÓN ---

        function showScreen(screenId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            const screenToShow = document.getElementById(screenId);
            if (screenToShow) {
                screenToShow.classList.add('active');
            } else {
                console.error("Error: Pantalla no encontrada -", screenId);
            }

            if (screenId === 'testScreen') {
                globalProgressWrapperNavbar.style.display = 'block';
                document.body.classList.add('test-mode-active');
            } else {
                globalProgressWrapperNavbar.style.display = 'none';
                document.body.classList.remove('test-mode-active');
            }
        }
        
        function selectStudyMethod(method) {
            currentStudyMethodType = method;
            if (method === 'study') {
                showScreen('studyTestSelectionScreen');
            } else if (method === 'exam') {
                showScreen('examTestSelectionScreen');
            }
        }

        function showTopicSelectionScreen(studyMethod) {
            populateTopicGrid();
            showScreen('topicSelectionScreen');
            if (currentStudyMethodType === 'study') {
                backFromTopicSelectionButton.onclick = () => showScreen('studyTestSelectionScreen');
            } else { 
                backFromTopicSelectionButton.onclick = () => showScreen('examTestSelectionScreen');
            }
        }


        function populateTopicGrid() {
            const topics = [...new Set(allQuestions.map(q => q.category))];
            console.log("Temas disponibles para selección:", topics); 
            topicGrid.innerHTML = '';
            topics.forEach(topic => {
                const topicEmoji = allQuestions.find(q => q.category === topic)?.emoji || '📚';
                const button = document.createElement('button');
                button.className = `btn topic-button ${currentStudyMethodType === 'study' ? 'btn-study' : 'btn-exam'}`;
                button.innerHTML = `${topicEmoji} ${topic}`;
                button.onclick = () => startTest('topic_specific', topic, currentStudyMethodType);
                topicGrid.appendChild(button);
            });
        }

        function startTest(scope, topic = '', studyMethod) {
            currentTestScope = scope;
            selectedTopic = topic;
            currentStudyMethodType = studyMethod; 
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;

            if (scope === 'all_questions') {
                loadedQuestions = shuffleArray([...allQuestions]); 
            } else if (scope === 'topic_specific') {
                loadedQuestions = allQuestions.filter(q => q.category === selectedTopic);
                if (loadedQuestions.length === 0) {
                    showMessage("Error", `No hay preguntas cargadas para el tema: ${selectedTopic}.`);
                    return;
                }
                loadedQuestions = shuffleArray([...loadedQuestions]); 
            }
             if (loadedQuestions.length === 0) {
                showMessage("Error", "No hay preguntas disponibles para este test.");
                showScreen('studyMethodSelectionScreen');
                return;
            }

            updateProgressBar(); 
            showScreen('countdownScreen');
            startCountdown();
        }

        function startCountdown() {
            let count = 3;
            document.getElementById('countdown').textContent = count;
            countdownTimer = setInterval(() => {
                count--;
                document.getElementById('countdown').textContent = count;
                if (count === 0) {
                    clearInterval(countdownTimer);
                    showScreen('testScreen'); 
                    displayQuestion();
                }
            }, 1000);
        }

        function displayQuestion() {
            if (currentQuestionIndex < 0 || currentQuestionIndex >= loadedQuestions.length) {
                finishTest(); 
                return;
            }
            const question = loadedQuestions[currentQuestionIndex];
            const questionGlobalIndex = allQuestions.indexOf(question); 

            let testModeInfoText = `Modo: ${currentStudyMethodType === 'study' ? 'Estudio' : 'Examen'}`;
            if (currentTestScope === 'topic_specific') {
                testModeInfoText += ` - Tema: ${selectedTopic}`;
            } else {
                testModeInfoText += ` - Test Completo`;
            }

            let optionsHTML = '';
            const shuffledOptions = shuffleArray([...question.options]);

            shuffledOptions.forEach(option => {
                const userAnswerEntry = userAnswers.find(ua => ua.questionGlobalIndex === questionGlobalIndex);
                const isSelected = userAnswerEntry && userAnswerEntry.answer === option.value;
                const isDisabled = userAnswerEntry && userAnswerEntry.correctedInStudy ? 'disabled' : '';
                
                optionsHTML += `<div class="option ${isSelected ? 'selected' : ''} ${isDisabled}" data-value="${option.value}" onclick="selectAnswer(this, '${option.value}')">${option.text}</div>`;
            });

            questionContainer.innerHTML = `
                <div class="question-header">
                    <span class="question-category">${question.emoji} ${question.category}</span>
                    <span class="question-number">Pregunta ${currentQuestionIndex + 1} de ${loadedQuestions.length}</span>
                    <div class="test-mode-info">${testModeInfoText}</div>
                </div>
                <div class="question-text">${question.questionText}</div>
                <div class="options">${optionsHTML}</div>
            `;

            correctionButtonContainer.innerHTML = ''; 
            instantCorrectionFeedback.style.display = 'none'; 
            instantCorrectionFeedback.className = 'mt-3 p-3 rounded-md text-center'; 

            const userAnswerEntry = userAnswers.find(ua => ua.questionGlobalIndex === questionGlobalIndex);
            if (currentStudyMethodType === 'study') {
                if (userAnswerEntry && userAnswerEntry.correctedInStudy) {
                    showInstantFeedback(questionGlobalIndex, userAnswerEntry.answer);
                    disableOptionsForCurrentQuestion(true);
                } else {
                    const correctBtn = document.createElement('button');
                    correctBtn.className = 'btn btn-secondary'; 
                    correctBtn.textContent = '💡 Corregir esta pregunta';
                    correctBtn.onclick = checkCurrentQuestion;
                    correctionButtonContainer.appendChild(correctBtn);
                    disableOptionsForCurrentQuestion(false); 
                }
            } else {
                 disableOptionsForCurrentQuestion(false); 
            }

            updateNavigationButtons();
            updateProgressBar();
        }
        
        function disableOptionsForCurrentQuestion(disable) {
            const optionsElements = questionContainer.querySelectorAll('.option');
            optionsElements.forEach(opt => {
                if (disable) {
                    opt.classList.add('disabled');
                } else {
                    opt.classList.remove('disabled');
                }
            });
        }

        function showInstantFeedback(questionGlobalIndex, userAnswerValue) {
            const question = allQuestions[questionGlobalIndex];
            if (!question) return;

            const isCorrect = userAnswerValue === question.correctAnswer;
            instantCorrectionFeedback.textContent = isCorrect ? '¡Correcto! ✅' : 'Incorrecto. ❌';
            instantCorrectionFeedback.classList.add(isCorrect ? 'correct' : 'incorrect');
            instantCorrectionFeedback.style.display = 'block';

            const optionsElements = questionContainer.querySelectorAll('.option');
            optionsElements.forEach(opt => {
                opt.classList.remove('selected'); 
                if (opt.dataset.value === question.correctAnswer) {
                    opt.classList.add('correct');
                }
                if (opt.dataset.value === userAnswerValue && !isCorrect) {
                    opt.classList.add('incorrect');
                }
            });
        }


        function checkCurrentQuestion() {
            const question = loadedQuestions[currentQuestionIndex];
            const questionGlobalIndex = allQuestions.indexOf(question);
            const userAnswerEntry = userAnswers.find(ua => ua.questionGlobalIndex === questionGlobalIndex);

            if (!userAnswerEntry) {
                showMessage("Atención", "Por favor, selecciona una respuesta antes de corregir.");
                return;
            }

            userAnswerEntry.correctedInStudy = true;
            
            showInstantFeedback(questionGlobalIndex, userAnswerEntry.answer);
            disableOptionsForCurrentQuestion(true); 
            correctionButtonContainer.innerHTML = ''; 
        }


        function selectAnswer(optionElement, answerValue) {
            const question = loadedQuestions[currentQuestionIndex];
            const questionGlobalIndex = allQuestions.indexOf(question);
            
            const existingAnswer = userAnswers.find(ua => ua.questionGlobalIndex === questionGlobalIndex);
            if (existingAnswer && existingAnswer.correctedInStudy) {
                return; 
            }

            const questionOptions = optionElement.parentElement.querySelectorAll('.option');
            questionOptions.forEach(opt => opt.classList.remove('selected'));
            optionElement.classList.add('selected');

            if (existingAnswer) {
                existingAnswer.answer = answerValue;
            } else {
                userAnswers.push({ questionGlobalIndex: questionGlobalIndex, answer: answerValue, correctedInStudy: false });
            }
        }

        function updateNavigationButtons() {
            prevButton.style.display = currentQuestionIndex === 0 ? 'none' : 'inline-block';
            const isLastQuestion = currentQuestionIndex === loadedQuestions.length - 1;
            nextButton.style.display = isLastQuestion ? 'none' : 'inline-block';
            finishButton.style.display = isLastQuestion ? 'inline-block' : 'none';
        }

        function updateProgressBar() {
            if (loadedQuestions.length === 0) {
                progressBarNavbar.style.width = '0%';
                progressInfoTextNavbar.textContent = 'Progreso: 0%';
                return;
            }
            const percentage = Math.round(((currentQuestionIndex +1) / loadedQuestions.length) * 100);
            progressBarNavbar.style.width = percentage + '%';
            progressInfoTextNavbar.textContent = `Progreso: ${percentage}% (${currentQuestionIndex + 1}/${loadedQuestions.length})`;
        }

        function nextQuestion() {
            const question = loadedQuestions[currentQuestionIndex];
            const questionGlobalIndex = allQuestions.indexOf(question);
            const userAnswerEntry = userAnswers.find(ua => ua.questionGlobalIndex === questionGlobalIndex);

            if (!userAnswerEntry) {
                showMessage("Atención", "Por favor, selecciona una respuesta antes de continuar.");
                return;
            }
            if (currentQuestionIndex < loadedQuestions.length - 1) {
                currentQuestionIndex++;
                displayQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                displayQuestion();
            }
        }

        function finishTest() {
            let unansweredInCurrentTest = 0;
            for(let i = 0; i < loadedQuestions.length; i++) {
                const qGlobalIndex = allQuestions.indexOf(loadedQuestions[i]);
                if (!userAnswers.some(ua => ua.questionGlobalIndex === qGlobalIndex)) {
                    unansweredInCurrentTest++;
                }
            }

            if (unansweredInCurrentTest > 0) {
                 showMessage("Confirmación", `Hay ${unansweredInCurrentTest} pregunta(s) sin responder. ¿Deseas finalizar de todas formas?`, true, () => calculateAndShowResults());
                 return;
            }
            calculateAndShowResults();
        }

        function calculateAndShowResults() {
            score = 0;
            loadedQuestions.forEach(question => {
                const questionGlobalIndex = allQuestions.indexOf(question);
                const userAnswerEntry = userAnswers.find(ua => ua.questionGlobalIndex === questionGlobalIndex);
                if (userAnswerEntry && userAnswerEntry.answer === question.correctAnswer) {
                    score++;
                }
            });

            const percentage = loadedQuestions.length > 0 ? (score / loadedQuestions.length) * 100 : 0;
            document.getElementById('scorePercentage').textContent = `${percentage.toFixed(0)}%`;
            document.getElementById('correctAnswers').textContent = score;
            document.getElementById('totalAnswered').textContent = loadedQuestions.length;

            displayResultsSummary();
            showScreen('resultsScreen');
        }

        function displayResultsSummary() {
            const summaryContainer = document.getElementById('resultsSummary');
            summaryContainer.innerHTML = '<h4>Resumen de tus respuestas:</h4>';

            loadedQuestions.forEach((question, index) => {
                const questionGlobalIndex = allQuestions.indexOf(question);
                const userAnswerEntry = userAnswers.find(ua => ua.questionGlobalIndex === questionGlobalIndex);
                const userAnswerValue = userAnswerEntry ? userAnswerEntry.answer : "No respondida"; 
                const isCorrect = userAnswerEntry ? userAnswerEntry.answer === question.correctAnswer : false;

                const resultItem = document.createElement('div');
                resultItem.classList.add('result-item', isCorrect ? 'correct' : 'incorrect');

                let userAnswerText = "No respondida";
                if (userAnswerEntry && userAnswerEntry.answer) { 
                    const userAnswerOption = question.options.find(opt => opt.value === userAnswerEntry.answer);
                    userAnswerText = userAnswerOption ? userAnswerOption.text : "Respuesta inválida";
                }
                
                const correctAnswerOption = question.options.find(opt => opt.value === question.correctAnswer);
                const correctAnswerText = correctAnswerOption ? correctAnswerOption.text : "Correcta no definida";

                resultItem.innerHTML = `
                    <p><strong>Pregunta ${index + 1}:</strong> ${question.questionText}</p>
                    <p><em>Tu respuesta: ${userAnswerText} ${isCorrect ? '✅' : (userAnswerEntry && userAnswerEntry.answer ? '❌' : '')}</em></p>
                    ${!isCorrect ? `<p><em>Respuesta correcta: ${correctAnswerText}</em></p>` : ''}
                `;
                summaryContainer.appendChild(resultItem);
            });
        }

        function restartApp() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            loadedQuestions = [];
            if(progressBarNavbar) progressBarNavbar.style.width = '0%';
            if(progressInfoTextNavbar) progressInfoTextNavbar.textContent = 'Progreso: 0%';
            showScreen('studyMethodSelectionScreen'); 
        }

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function showMessage(title, message, showConfirm = false, confirmCallback = null) {
            modalTitle.textContent = title;
            modalMessage.textContent = message;
            
            const modalContent = messageModal.querySelector('.modal-content');
            const existingActionButtons = modalContent.querySelectorAll('button.btn-modal-action, button.btn-modal-cancel');
            existingActionButtons.forEach(btn => btn.remove());

            const defaultButton = modalContent.querySelector('button.btn');
            defaultButton.style.display = 'inline-block';
            defaultButton.textContent = "Aceptar";
            defaultButton.onclick = closeModal;

            if (showConfirm && confirmCallback) {
                defaultButton.style.display = 'none';

                const confirmBtn = document.createElement('button');
                confirmBtn.textContent = "Sí, finalizar";
                confirmBtn.className = "btn btn-training btn-modal-action"; 
                confirmBtn.onclick = () => {
                    closeModal();
                    confirmCallback();
                };

                const cancelBtn = document.createElement('button');
                cancelBtn.textContent = "No, continuar";
                cancelBtn.className = "btn btn-secondary btn-modal-cancel";
                cancelBtn.onclick = closeModal;
                
                modalContent.appendChild(cancelBtn);
                modalContent.appendChild(confirmBtn);
            }
            
            messageModal.style.display = "flex";
        }

        function closeModal() {
            messageModal.style.display = "none";
        }

        window.onclick = function(event) {
            if (event.target == messageModal) {
                closeModal();
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            showScreen('studyMethodSelectionScreen'); 
            document.getElementById('currentYear').textContent = new Date().getFullYear();
        });
    </script>
</body>
</html>
